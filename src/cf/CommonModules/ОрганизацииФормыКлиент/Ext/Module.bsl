
////////////////////////////////////////////////////////////////////////////////
// Универсальные методы для справочника Организации
//
// Клиентские методы форм справочника Организации
//
////////////////////////////////////////////////////////////////////////////////

#Область ПрограммныйИнтерфейс

Процедура ПерейтиКСервисуОпределитьРеквизитыИФНС() Экспорт
	
	ПерейтиПоНавигационнойСсылке(АдресСервисаОпределитьРеквизитыИФНС());
	
КонецПроцедуры

Процедура ПерейтиКСервисуСкачатьКвитанциюНаОплатуГоспошлиныПриРегистрации() Экспорт
	
	ПерейтиПоНавигационнойСсылке(АдресСервисаОплатаГоспошлиныПриРегистрации());
	
КонецПроцедуры

Процедура ПерейтиКСервисуУплатаГоспошлины() Экспорт
	
	ПерейтиПоНавигационнойСсылке(АдресСервисаУплатаГоспошлины());
	
КонецПроцедуры

Процедура ПерейтиКСервисуУзнатьИНН() Экспорт
	
	ПерейтиПоНавигационнойСсылке(АдресСервисаУзнатьИНН());
	
КонецПроцедуры

Процедура ОткрытьДемоверсию() Экспорт
	
	АдресДемобазы = ОрганизацииФормыВызовСервера.АдресДемобазы();
	Если ЗначениеЗаполнено(АдресДемобазы) Тогда
		ПерейтиПоНавигационнойСсылке(АдресДемобазы);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Процедура ОбновитьСистемаНалогообложения(ПараметрыУчетнойПолитики, Форма) Экспорт
	
	Объект = Форма.Объект;
	
	Если ПараметрыУчетнойПолитики <> Неопределено Тогда // организация ещё не записывалась в базу
		ОбщегоНазначенияКлиентСервер.ДополнитьСтруктуру(Форма.СтруктураУчетнойПолитики, ПараметрыУчетнойПолитики, Истина);
		Форма.СистемаНалогообложенияПредставление = ОрганизацииФормыКлиентСервер.ПредставлениеСистемыНалогообложения(Форма.СтруктураУчетнойПолитики);
	ИначеЕсли Не Объект.Ссылка.Пустая() Тогда // изменяем текущую политику у ранее созданной организации
		Форма.СистемаНалогообложенияПредставление = ОрганизацииФормыКлиентСервер.ПредставлениеСистемыНалогообложения(Объект.Ссылка);
	КонецЕсли;
	ОформитьПредставлениеСистемыНалогообложения(Форма);
	
КонецПроцедуры

Процедура ОформитьПредставлениеСистемыНалогообложения(Форма) Экспорт
	
	Элементы = Форма.Элементы;
	
	Если ЗначениеЗаполнено(Форма.СистемаНалогообложенияПредставление) Тогда
		Если Форма.ВидОрганизации = "ОбособленноеПодразделение" И Форма.Параметры.Ключ.Пустая() Тогда
			// Система налогообложения обособленного подразделения не выбирается, т.к. не может отличаться от головной организации.
			Элементы.СистемаНалогообложенияПредставление.Гиперссылка = Ложь;
			Элементы.СистемаНалогообложенияПредставление.ЦветТекста = ОбщегоНазначенияКлиентПовтИсп.ЦветСтиля("НезаполненныйРеквизит");
		Иначе
			Элементы.СистемаНалогообложенияПредставление.Гиперссылка = Истина;
			Элементы.СистемаНалогообложенияПредставление.ЦветТекста = ОбщегоНазначенияКлиентПовтИсп.ЦветСтиля("ГиперссылкаТабличнойЧасти");
		КонецЕсли;
	Иначе
		Форма.СистемаНалогообложенияПредставление = НСтр("ru = '<Не указана система налогообложения>'");
		Элементы.СистемаНалогообложенияПредставление.Гиперссылка = Ложь;
		Элементы.СистемаНалогообложенияПредставление.ЦветТекста = ОбщегоНазначенияКлиентПовтИсп.ЦветСтиля("НезаполненныйРеквизит");
	КонецЕсли;
	
КонецПроцедуры

Функция ФИОПриИзменении(Объект) Экспорт
	
	ОбновитьПредставление = Ложь;
	
	Если ЗначениеЗаполнено(Объект.ФамилияИП) Или ЗначениеЗаполнено(Объект.ИмяИП) Или ЗначениеЗаполнено(Объект.ОтчествоИП) Тогда
		
		Объект.НаименованиеСокращенное = ОрганизацииФормыКлиентСервер.СокращенноеНаименованиеИндивидульногоПредпринимателя(
			Объект.ФамилияИП, Объект.ИмяИП, Объект.ОтчествоИП);
		
		Объект.НаименованиеПолное = ОрганизацииФормыКлиентСервер.ПолноеНаименованиеИндивидульногоПредпринимателя(
			Объект.ФамилияИП, Объект.ИмяИП, Объект.ОтчествоИП);
		
		Объект.Наименование = ОрганизацииФормыКлиентСервер.НаименованиеИндивидульногоПредпринимателя(
			Объект.ФамилияИП, Объект.ИмяИП, Объект.ОтчествоИП);
		
		ОбновитьПредставление = Истина;
		
	КонецЕсли;
	
	Возврат ОбновитьПредставление;
	
КонецФункции

Функция АдресСервисаОпределитьРеквизитыИФНС()
	
	Возврат "https://service.nalog.ru/addrno.do";
	
КонецФункции

Функция АдресСервисаОплатаГоспошлиныПриРегистрации()
	
	Возврат "https://service.nalog.ru/gp2.do";
	
КонецФункции

Функция АдресСервисаУплатаГоспошлины()
	
	Возврат "https://service.nalog.ru/inn.do";
	
КонецФункции

Функция АдресСервисаУзнатьИНН()
	
	Возврат "https://service.nalog.ru/inn.do";
	
КонецФункции

#КонецОбласти


